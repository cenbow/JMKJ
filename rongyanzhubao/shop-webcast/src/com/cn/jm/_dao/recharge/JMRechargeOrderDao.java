
package com.cn.jm._dao.recharge;

import java.math.BigDecimal;
import java.util.Date;
import java.util.HashMap;

import com.cn._gen.dao.RechargeOrderDao;
import com.cn._gen.model.RechargeOrder;
import com.cn.jm.core.web.dao.JMBaseDao;
import com.jfinal.plugin.activerecord.Db;
import com.jfinal.plugin.activerecord.Page;


/**
 * Generated by 广州小跑robot.
 */
public class JMRechargeOrderDao extends RechargeOrderDao{
	
	public int create(int userId,BigDecimal count){
		RechargeOrder rechargeOrder = new RechargeOrder();
		rechargeOrder.setUserId(userId);
		rechargeOrder.setFrom("系统充值");
		rechargeOrder.setCount(count);
		rechargeOrder.setCreateTime(new Date());
		save(rechargeOrder);
		return rechargeOrder != null ?rechargeOrder.getId() : -1;
	}
	
	/**
	 * 
	 * @date 2019年4月19日 下午6:40:39
	 * @author JaysonLee
	 * @Description: 统计平台一共充值了多少钱
	 * @reqMethod post
	 * @paramter
	 * @pDescription	
	 * @return
	 *
	 */
	public BigDecimal sumAllRechargeMoney() {
		BigDecimal sumBigDecimal = Db.queryBigDecimal("select sum(count) from tb_recharge_order where status = 1");
		return sumBigDecimal ;
	}
	
	
	public Page<RechargeOrder> pageByUserId(int userId,int pageNumber,int pageSize){
		HashMap<String, Object> paraMap = new HashMap<>();
		paraMap.put("userId",userId);
		Page<RechargeOrder> page = page(pageNumber, pageSize, "*", paraMap, null,null,"", "id", JMBaseDao.DESC, false);
		return page ;
	}
	
}
